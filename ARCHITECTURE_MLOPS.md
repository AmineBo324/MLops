# ğŸ“Š Architecture MLOps - Phase 5

## Vue d'ensemble du Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸš€ PIPELINE MLOPS COMPLET                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  DVC PIPELINE                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   ğŸ“¥ Data Raw                                                        â”‚
â”‚        â”‚                                                             â”‚
â”‚        â”œâ”€ all_tickets_processed_improved_v3.csv                     â”‚
â”‚        â”‚                                                             â”‚
â”‚        â–¼                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚   â”‚   PREPARE    â”‚  params: test_size, random_state                â”‚
â”‚   â”‚   (Stage 1)  â”‚  deps: scripts/prepare_data.py                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  outs: train.csv, test.csv                      â”‚
â”‚          â”‚          metrics: data_stats.json                        â”‚
â”‚          â–¼                                                           â”‚
â”‚   ğŸ“Š Data Processed                                                 â”‚
â”‚        â”œâ”€ train.csv                                                 â”‚
â”‚        â””â”€ test.csv                                                  â”‚
â”‚          â”‚                                                           â”‚
â”‚          â–¼                                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚   â”‚ TRAIN_TFIDF  â”‚  params: max_features, ngram_range, C           â”‚
â”‚   â”‚   (Stage 2)  â”‚  deps: scripts/train_tfidf.py                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  outs: *.pkl models                             â”‚
â”‚          â”‚          metrics: accuracy, f1, precision               â”‚
â”‚          â”‚          plots: confusion_matrix, training_history       â”‚
â”‚          â–¼                                                           â”‚
â”‚   ğŸ¤– Models                                                          â”‚
â”‚        â”œâ”€ ticket_classifier_model.pkl                               â”‚
â”‚        â”œâ”€ tfidf_vectorizer.pkl                                      â”‚
â”‚        â”œâ”€ svm_model.pkl                                             â”‚
â”‚        â”œâ”€ metrics.json                                              â”‚
â”‚        â””â”€ confusion_matrix.csv                                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  MLFLOW TRACKING & REGISTRY                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   ğŸ”¬ Experiment Tracking                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚  Experiment: callcenterai-tfidf        â”‚                        â”‚
â”‚   â”‚  â”œâ”€ Run 1: accuracy=0.897              â”‚                        â”‚
â”‚   â”‚  â”œâ”€ Run 2: accuracy=0.903              â”‚                        â”‚
â”‚   â”‚  â””â”€ Run 3: accuracy=0.910 â­           â”‚                        â”‚
â”‚   â”‚                                         â”‚                        â”‚
â”‚   â”‚  Logged:                                â”‚                        â”‚
â”‚   â”‚  â€¢ Params: max_features, C, kernel     â”‚                        â”‚
â”‚   â”‚  â€¢ Metrics: accuracy, f1, precision    â”‚                        â”‚
â”‚   â”‚  â€¢ Artifacts: model.pkl, vectorizer    â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                      â”‚                                               â”‚
â”‚                      â–¼                                               â”‚
â”‚   ğŸ“¦ Model Registry                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚  Model: callcenterai-tfidf-classifier  â”‚                        â”‚
â”‚   â”‚                                         â”‚                        â”‚
â”‚   â”‚  Version 1 â†’ ğŸ“¦ Archived               â”‚                        â”‚
â”‚   â”‚  Version 2 â†’ ğŸ”§ Staging                â”‚                        â”‚
â”‚   â”‚  Version 3 â†’ ğŸš€ Production â­          â”‚                        â”‚
â”‚   â”‚                                         â”‚                        â”‚
â”‚   â”‚  Stages:                                â”‚                        â”‚
â”‚   â”‚  â€¢ None      â†’ Pas encore dÃ©ployÃ©      â”‚                        â”‚
â”‚   â”‚  â€¢ Staging   â†’ Tests prÃ©-production    â”‚                        â”‚
â”‚   â”‚  â€¢ Production â†’ ModÃ¨le actif           â”‚                        â”‚
â”‚   â”‚  â€¢ Archived  â†’ Anciennes versions      â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                       â”‚
â”‚   ğŸŒ MLflow UI: http://localhost:5000                               â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  CI/CD GITHUB ACTIONS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚   ğŸ“¤ git push origin main                                            â”‚
â”‚        â”‚                                                              â”‚
â”‚        â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  Job 1: ğŸ” Lint & Tests                â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Black (format check)               â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Flake8 (linting)                   â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Pytest (unit tests)                â”‚                         â”‚
â”‚   â”‚  â””â”€ Coverage report                    â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                  â”‚                                                    â”‚
â”‚                  â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  Job 2: ğŸ”’ Security Scan               â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Bandit (Python security)           â”‚                         â”‚
â”‚   â”‚  â””â”€ Safety (dependencies CVE)          â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                  â”‚                                                    â”‚
â”‚                  â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  Job 3: ğŸ³ Build & Push Docker         â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Build: tfidf_svc                   â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Build: transformer_svc             â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Build: agent                       â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Build: web_interface               â”‚                         â”‚
â”‚   â”‚  â”œâ”€ Push to GHCR                       â”‚                         â”‚
â”‚   â”‚  â””â”€ ğŸ›¡ï¸ Trivy Security Scan            â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                  â”‚                                                    â”‚
â”‚                  â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚  Job 4: ğŸš€ Deploy Staging              â”‚                         â”‚
â”‚   â”‚  â””â”€ Deploy to staging env              â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                        â”‚
â”‚   âœ… Pipeline Status: SUCCESS                                        â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ WORKFLOW COMPLET                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   1. ğŸ’» DÃ©veloppeur modifie params.yaml                               â”‚
â”‚         â†“                                                              â”‚
â”‚   2. ğŸ”§ dvc repro (exÃ©cute pipeline)                                  â”‚
â”‚         â†“                                                              â”‚
â”‚   3. ğŸ“Š MLflow log (track experiment)                                 â”‚
â”‚         â†“                                                              â”‚
â”‚   4. ğŸ“¦ Model Registry (register & promote)                           â”‚
â”‚         â†“                                                              â”‚
â”‚   5. ğŸ“¤ git commit & push                                             â”‚
â”‚         â†“                                                              â”‚
â”‚   6. ğŸ¤– GitHub Actions (CI/CD auto)                                   â”‚
â”‚         â†“                                                              â”‚
â”‚   7. ğŸš€ Deploy to Staging/Production                                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Checklist Phase 5

- [x] **DVC Pipeline** (dvc.yaml, params.yaml)
  - [x] Stage prepare: prÃ©paration donnÃ©es
  - [x] Stage train_tfidf: entraÃ®nement modÃ¨le
  - [x] MÃ©triques et plots configurÃ©s

- [x] **MLflow**
  - [x] Tracking intÃ©grÃ© dans train_tfidf.py
  - [x] Model Registry script (mlflow_registry.py)
  - [x] Stages: None â†’ Staging â†’ Production â†’ Archived

- [x] **CI/CD GitHub Actions**
  - [x] Lint & Tests (Black, Flake8, Pytest)
  - [x] Security Scan (Bandit, Safety)
  - [x] Build & Push Docker (4 services)
  - [x] Trivy Security Scan
  - [x] Deploy Staging

- [x] **Documentation**
  - [x] MLOPS_GUIDE.md (guide complet)
  - [x] setup_mlops.py (script d'installation)
  - [x] tests/test_basic.py (tests unitaires)

## ğŸ“š Commandes Rapides

```bash
# Setup complet
python setup_mlops.py

# Pipeline DVC
dvc repro

# MLflow UI
mlflow server --port 5000

# Model Registry
python scripts/mlflow_registry.py register
python scripts/mlflow_registry.py production

# Tests
pytest tests/ -v

# CI/CD local
act push
```
